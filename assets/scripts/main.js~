window.AudioContext = window.AudioContext || window.webkitAudioContext;

var context = new AudioContext();
  console.log("too");

navigator.webkitGetUserMedia({video: true, audio: true}, function(stream) {
  console.log("toto");
  
  var video = $('video')[0];
  video.src = window.webkitURL.createObjectURL(stream);
  console.log("toto");
  
  // microphone -> filter -> destination.
  microphone.connect(filter);
  filter.connect(context.destination);
}, function(err) {
         console.log("The following error occured: " + err);
      });
